<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linear Gauge with Gradient</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <canvas id="myChart"></canvas>

    <script>
        const ctx = document.getElementById('myChart').getContext('2d');

        // Create a gradient for the linear gauge
        const gradient = ctx.createLinearGradient(0, 0, ctx.canvas.width, 0);
        gradient.addColorStop(0, "green");
        gradient.addColorStop(0.25, "limegreen");
        gradient.addColorStop(0.5, "yellow");
        gradient.addColorStop(0.75, "orange");
        gradient.addColorStop(1, "red");

        // Plugin to draw the score marker
        const gaugeChartMarker = {
            id: 'gaugeChartMarker',
            afterDatasetsDraw(chart, args, pluginOptions) {
                const { ctx } = chart;
                const score = chart.data.datasets[0].data[0]; // Get the score value
                const width = chart.chartArea.width;
                const height = chart.chartArea.height;
                
                const markerX = (score / 100) * width; // Calculate marker X position
                
                // Draw the marker (circle)
                ctx.save();
                ctx.beginPath();
                ctx.arc(chart.chartArea.left + markerX, (height / 2) - 15, 4, 0, 2 * Math.PI); // Marker at score position
                ctx.fillStyle = 'black'; // Marker color
                ctx.fill();
                ctx.restore();
            }
        };

        // Create the linear gauge chart
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Gauge'],
                datasets: [{
                    label: 'Gauge Background',
                    data: [50], // Full gauge (100%)
                    backgroundColor: gradient, // Gradient background
                    borderWidth: 0,
                    barThickness: 10 // Set bar thickness for the gauge
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y', // Horizontal bar (linear gauge)
                plugins: {
                    legend: { display: false }, // Hide legend
                    tooltip: { enabled: false } // Disable tooltips
                },
                scales: {
                    x: {
                        display: false, // Hide X axis labels
                    },
                    y: {
                        display: false, // Hide Y axis labels
                    }
                }
            },
            plugins: [gaugeChartMarker] // Add marker plugin
        });
    </script>
</body>
</html>
